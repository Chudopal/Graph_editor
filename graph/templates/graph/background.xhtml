{% load static %}
<html> 
     <head> 
      <title>Edit graph</title>
         <script type="text/javascript" src={% static "graph/js/draw.js" %}></script>
     </head> 
     <body> 
        <svg id="draw" width="1000" height="900">
          <rect x="0" y="0" height="900" width="1000" fill="DarkSlateGray" />
        </svg>
        <script>
          ns = 'http://www.w3.org/2000/svg';
          var balls = [];
          var draw = document.getElementById("draw");
          draw.addEventListener("dblclick", (e)=>{
            let ball = document.createElementNS(ns, 'circle');
            ball.setAttributeNS(null, 'cx', e.clientX);
            ball.setAttributeNS(null, 'cy', e.clientY);
            ball.setAttributeNS(null, 'r', 10);
            ball.setAttributeNS(null, 'fill', "PapayaWhip");
            balls.push(ball);
            draw.append(ball);
            
            ball.addEventListener("mouseover", (e)=>{
              ball.setAttributeNS(null, "fill", "Salmon");
            });
          
            ball.addEventListener("mouseout", (e) => {
              ball.setAttributeNS(null, "fill", "PapayaWhip");
            });
            
            ball.addEventListener("click", (e)=>{
              var triangle = document.createElement("polygon");
              
              draw.addEventListener("mousemove", (e)=>{
                var coords =  e.clientX + "," + e.clientY;
                var tgOfAngle = (Math.abs(Number(ball.getAttribute("cy") - e.clientY )) /
                Math.abs(Number(ball.getAttribute('cx')) - e.clientX));
                console.log(tgOfAngle);
              });
            });

            ball.addEventListener("mousedown", function mousedown(e){

              var isClick = false;

              draw.addEventListener("mouseup", (e)=>{
                isClick = true;
              });

                draw.addEventListener("mousemove", function move(e){
                  if(!isClick){
                  ball.setAttributeNS(null, 'cx', e.clientX);
                  ball.setAttributeNS(null, 'cy', e.clientY);
                
                  draw.addEventListener("mouseup", function mouseup(e){
                    ball.setAttributeNS(null, 'cx', e.clientX);
                    ball.setAttributeNS(null, 'cy', e.clientY);
                    //console.log("Here");
                    draw.removeEventListener("mousemove", move);
                    draw.removeEventListener("mouseup", mouseup);            
                  });
                }
              });
            });
          });
        </script>
     </body> 
 </html> 